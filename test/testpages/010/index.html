<!DOCTYPE html>
<html>
<head>
    <title>Vizabi Test Pages: 010</title>

    <link rel="stylesheet" href="../../assets/css/bubbleChartStyles.css">
    <link rel="stylesheet" href="../../libs/jquery-ui.custom/css/ui-lightness/jquery-ui-1.10.3.custom.css">

    <script type="text/javascript" src="../../libs/jquery-ui.custom/js/jquery-1.9.1.js" charset="utf-8"></script>
    <script type="text/javascript" src="../../libs/jquery-ui.custom/js/jquery-ui-1.10.3.custom.js" charset="utf-8"></script>
    <script type="text/javascript" src="../../libs/d3/d3.v3.js" charset="utf-8"></script>
    <script type="text/javascript" src="../../libs/queuejs/queue.js" charset="utf-8"></script>

    <script type="text/javascript" src="../../src/start.js" charset="utf-8"></script>
    <script type="text/javascript" src="../../src/dataCube/dataCube.js" charset="utf-8"></script>
    <script type="text/javascript" src="../../src/dataCube/loader/readerSingleCSV.js" charset="utf-8"></script>
    <script type="text/javascript" src="../../src/dataCube/loader/readerMultipleJSON.js" charset="utf-8"></script>
    <script type="text/javascript" src="../../src/dataCube/loader/readerMultipleCSV.js" charset="utf-8"></script>
    <script type="text/javascript" src="../../src/dataCube/loader/readerMultiCSV.js" charset="utf-8"></script>
    <script type="text/javascript" src="../../src/dataCube/loaderFactory.js" charset="utf-8"></script>
    <script type="text/javascript" src="../../src/components/settingsButton.js" charset="utf-8"></script>
    <script type="text/javascript" src="../../src/charts/bubbleChart/bubbleChartModel.js" charset="utf-8"></script>
    <script type="text/javascript" src="../../src/charts/bubbleChart/bubbleChart.js" charset="utf-8"></script>
    <script type="text/javascript" src="../../src/charts/bubbleChart/viz/vizBubble.js" charset="utf-8"></script>
    <script type="text/javascript" src="../../src/charts/bubbleChart/viz/vizBubblePrint.js" charset="utf-8"></script>
    <script type="text/javascript" src="../../src/charts/bubbleChart/bubbleChartDataHelper.js" charset="utf-8"></script>
    <script type="text/javascript" src="../../src/charts/chartGrid/chartGrid.js" charset="utf-8"></script>
    <script type="text/javascript" src="../../src/components/timeslider.js" charset="utf-8"></script>

    <script type="text/javascript" src="../../src/dataCube/dataCubei18nLayer.js" charset="utf-8"></script>
    <script type="text/javascript" src="data/fakei18n/i18n.js"></script>
</head>
<body>
<div style="font-family: 'Calisto MT', 'Bookman Old Style', Bookman, 'Goudy Old Style', Garamond, 'Hoefler Text', 'Bitstream Charter', Georgia, serif;" align="center">Description: Vizabi allows users to drag labels to their desired position and remembers it in its state</div>
<script>
    var renderDiv = "chart-1";
    var chartState;
    var app;

    if (window.history.state === null) {
        var URL = window.location.href.toString();
        // When a new tab is opened
        if (URL.indexOf("#?") !== -1) {
            var model = JSON.parse(URL.substr(URL.indexOf("#?") + 2, URL.length));
            history.pushState(model, "", "#?" + JSON.stringify(model));
            chartState = model;
        }
        else {
            chartState = {
                dataPath: "data/",
                year: 2012,
                xIndicator : "gdp",
                yIndicator : "lex",
                sizeIndicator : "pop",
                entity : "unstates",
                fileFormat: "multipleCSV",
                xAxisScale: "log",
                xAxisTickValues: [500,1000,2000,5000,10000,20000, 50000],
                language : "en",
                isInteractive: false
            };
        }

        app = new gapminder.bubbleChart(renderDiv, chartState);

        app.registerStateBindCallback(function(model) {
            var currentState = window.history.state;

            if (!currentState) {
                history.pushState(model, "", "#?" + JSON.stringify(model));
            }
            else {
                history.replaceState(model, "", "#?" + JSON.stringify(model));
            }
        });

    }
    else {
        chartState = window.history.state;
        app = new gapminder.bubbleChart(renderDiv, chartState);
    }

</script>
</body>
</html>